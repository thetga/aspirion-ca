<aside class="sidebar">
  <h5>Latest Posts</h5>
  <ul id="latest-posts">
    <li class="text-muted">Loading…</li>
  </ul>
</aside>

<script>
(function () {
  function formatDate(isoDate) {
    const d = new Date(isoDate);
    return d.toLocaleDateString("en-IN", {
      day: "2-digit",
      month: "short",
      year: "numeric"
    });
  }

  fetch('/latest.json')
    .then(res => res.json())
    .then(data => {
      const list = document.getElementById('latest-posts');
      if (!list) return;

      list.innerHTML = '';

      data.slice(0, 5).forEach(item => {
        const li = document.createElement('li');

        li.innerHTML = `
          <a href="${item.url}">${item.title}</a>
          <span class="post-time">
            ${formatDate(item.date)} · ${item.source} · ${item.type}
          </span>
        `;

        list.appendChild(li);
      });
    })
    .catch(() => {
      const list = document.getElementById('latest-posts');
      if (list) {
        list.innerHTML = '<li class="text-muted">Unable to load</li>';
      }
    });
})();
</script>
